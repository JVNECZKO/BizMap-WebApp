<IfModule mod_rewrite.c>
    RewriteEngine On

    #################################################################
    # 1) TWARDY BLOCK – WRAŻLIWE KATALOGI (403)
    #################################################################
    RewriteRule ^(app|bootstrap|config|database|resources|routes|storage|tests|vendor)(/|$) - [F,L]

    #################################################################
    # 2) TWARDY BLOCK – WRAŻLIWE PLIKI (403)
    #################################################################
    RewriteRule ^(\.env|\.git|\.htaccess|artisan|composer\.(json|lock)|package\.json|phpunit\.xml|vite\.config\.js|README\.md|error_log)$ - [F,L]

    #################################################################
    # 3) CLEAN URL – JEŚLI KTOŚ WEJDZIE /public → PRZEKIERUJ NA /
    #################################################################
    RewriteRule ^public/(.*)$ /$1 [R=301,L]

    #################################################################
    # 4) FRONT CONTROLLER – CAŁY RUCH DO /public
    #################################################################
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ public%{REQUEST_URI} [L]
</IfModule>